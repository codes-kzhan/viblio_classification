<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">   
 <meta>
  <!-- Stylesheets -->
  <link href="../web.css" type="text/css" rel="stylesheet"></link>
  <title>VLFeat - Documentation - C API</title>
   
  
  <!-- Scripts-->
  
 </meta>
 
 <!-- Body Start -->
 <body>
  <div id="header">
   <!-- Google CSE Search Box Begins -->
   <form action="http://www.vlfeat.org/search.html" method="get" id="cse-search-box" enctype="application/x-www-form-urlencoded">
    <div>
     <input type="hidden" name="cx" value="003215582122030917471:oq23albfeam"></input>
     <input type="hidden" name="cof" value="FORID:11"></input>
     <input type="hidden" name="ie" value="UTF-8"></input>
     <input type="text" name="q" size="31"></input>
     <input type="submit" name="sa" value="Search"></input>
    </div>
   </form>
   <script src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en" xml:space="preserve" type="text/javascript"></script>
   <!-- Google CSE Search Box Ends -->
   <h1>VLFeat.org</h1>
  </div>
  <div id="headbanner">
   Documentation - C API
  </div>
  <div id="pagebody">
   <div id="sidebar"> <!-- Navigation Start -->
    <ul>
<li><a href="../index.html">Home</a>
</li>
<li><a href="../download.html">Download</a>
</li>
<li><a href="../doc.html">Documentation</a>
<ul>
<li><a href="../mdoc/mdoc.html">Matlab API</a>
</li>
<li><a href="index.html" class='active' >C API</a>
</li>
<li><a href="../man/man.html">Man pages</a>
</li>
</ul></li>
<li><a href="../overview/tut.html">Tutorials</a>
</li>
</ul>

   </div> <!-- sidebar -->
   <div id="content">
    
    <div class="doxygen">
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>mexutils.h</h1><a href="mexutils_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="comment">/* AUTORIGHTS</span>
<a name="l00007"></a>00007 <span class="comment">Copyright (C) 2007-09 Andrea Vedaldi and Brian Fulkerson</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">This file is part of VLFeat, available in the terms of the GNU</span>
<a name="l00010"></a>00010 <span class="comment">General Public License version 2.</span>
<a name="l00011"></a>00011 <span class="comment">*/</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#ifndef MEXUTILS_H</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span><span class="preprocessor">#define MEXUTILS_H</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span>
<a name="l00016"></a>00016 <span class="preprocessor">#include"mex.h"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include&lt;<a class="code" href="generic_8h.html" title="Generic.">vl/generic.h</a>&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include&lt;ctype.h&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include&lt;stdio.h&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include&lt;stdarg.h&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifdef VL_COMPILER_MSC</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define snprintf _snprintf</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define vsnprintf _vsnprintf</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#if ! defined (MX_API_VER) | (MX_API_VER &lt; 0x07030000)</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="keyword">typedef</span> <a class="code" href="host_8h.html#eb7c862765448a70017105efa4d25e7a" title="Unsigned 32-bit integer.">vl_uint32</a> mwSize ;
<a name="l00029"></a>00029 <span class="keyword">typedef</span> <a class="code" href="host_8h.html#03fa435c713d3141c4a700f79f5b2600" title="Signed 32-bit integer.">vl_int32</a> mwIndex ;
<a name="l00030"></a>00030 <span class="preprocessor">#endif</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00134"></a>00134 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00135"></a><a class="code" href="mexutils_8h.html#c629ff4443857a9b62f4fcf97685d251">00135</a> <a class="code" href="mexutils_8h.html#c629ff4443857a9b62f4fcf97685d251" title="Check if a MATLAB array is of a prescribed class.">vlmxIsOfClass</a> (mxArray <span class="keyword">const</span> * array, mxClassID classId)
<a name="l00136"></a>00136 {
<a name="l00137"></a>00137   <span class="keywordflow">return</span> mxGetClassID (array) == classId ;
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00147"></a>00147 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00148"></a><a class="code" href="mexutils_8h.html#98f97abf05708722338eee548633c646">00148</a> <a class="code" href="mexutils_8h.html#98f97abf05708722338eee548633c646" title="Check if a MATLAB array is real.">vlmxIsReal</a> (mxArray <span class="keyword">const</span> * array)
<a name="l00149"></a>00149 {
<a name="l00150"></a>00150   <span class="keywordflow">return</span> mxIsNumeric (array) &amp;&amp; ! mxIsComplex (array) ;
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00165"></a>00165 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00166"></a><a class="code" href="mexutils_8h.html#467ab633cf79af40612fd396f9210717">00166</a> <a class="code" href="mexutils_8h.html#467ab633cf79af40612fd396f9210717" title="Check if a MATLAB array is scalar.">vlmxIsScalar</a> (mxArray <span class="keyword">const</span> * array)
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168   <span class="keywordflow">return</span> (! mxIsSparse (array)) &amp;&amp; (mxGetNumberOfElements (array) == 1)  ;
<a name="l00169"></a>00169 }
<a name="l00170"></a>00170 
<a name="l00179"></a>00179 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00180"></a><a class="code" href="mexutils_8h.html#f4e8c8fbc80faf0c72ba3302607267ed">00180</a> <a class="code" href="mexutils_8h.html#f4e8c8fbc80faf0c72ba3302607267ed" title="Check if a MATLAB array is a vector.">vlmxIsVector</a> (mxArray <span class="keyword">const</span> * array, <a class="code" href="host_8h.html#66417c5847876295ea87b38140073879" title="Signed version of vl_size and vl_uindex.">vl_index</a> numElements)
<a name="l00181"></a>00181 {
<a name="l00182"></a>00182   mwSize numDimensions = mxGetNumberOfDimensions (array) ;
<a name="l00183"></a>00183   mwSize <span class="keyword">const</span> * dimensions = mxGetDimensions (array) ;
<a name="l00184"></a>00184   <a class="code" href="host_8h.html#c13bd3cc913e1da576e189a3ec8d66fc" title="Same as vl_size.">vl_uindex</a> di ;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="comment">/* check that it is not sparse */</span>
<a name="l00187"></a>00187   <span class="keywordflow">if</span> (mxIsSparse (array)) {
<a name="l00188"></a>00188     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#bce143a5a9b51d987a74f2ad30046520" title="false (0) constant">VL_FALSE</a> ;
<a name="l00189"></a>00189   }
<a name="l00190"></a>00190 
<a name="l00191"></a>00191   <span class="comment">/* check that the number of elements is the prescribed one */</span>
<a name="l00192"></a>00192   <span class="keywordflow">if</span> ((numElements &gt;= 0) &amp;&amp; (mxGetNumberOfElements (array) != numElements)) {
<a name="l00193"></a>00193     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#bce143a5a9b51d987a74f2ad30046520" title="false (0) constant">VL_FALSE</a> ;
<a name="l00194"></a>00194   }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <span class="comment">/* ok if empty */</span>
<a name="l00197"></a>00197   <span class="keywordflow">if</span> (mxGetNumberOfElements (array) == 0) {
<a name="l00198"></a>00198     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#0c72a8c7d2abcd2871b3348138c5f1f4" title="true (1) constant">VL_TRUE</a> ;
<a name="l00199"></a>00199   }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   <span class="comment">/* find first non-singleton dimension */</span>
<a name="l00202"></a>00202   <span class="keywordflow">for</span> (di = 0 ; (dimensions[di] == 1) &amp;&amp; di &lt; numDimensions ; ++ di) ;
<a name="l00203"></a>00203 
<a name="l00204"></a>00204   <span class="comment">/* skip it */</span>
<a name="l00205"></a>00205   <span class="keywordflow">if</span> (di &lt; numDimensions) ++ di ;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207   <span class="comment">/* find next non-singleton dimension */</span>
<a name="l00208"></a>00208   <span class="keywordflow">for</span> (; (dimensions[di] == 1) &amp;&amp; di &lt; numDimensions ; ++ di) ;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <span class="comment">/* if none found, then ok */</span>
<a name="l00211"></a>00211   <span class="keywordflow">return</span> di == numDimensions ;
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00223"></a>00223 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00224"></a><a class="code" href="mexutils_8h.html#22990c0542dceaa97728420e7022853a">00224</a> <a class="code" href="mexutils_8h.html#22990c0542dceaa97728420e7022853a" title="Check if a MATLAB array is a matrix.">vlmxIsMatrix</a> (mxArray <span class="keyword">const</span> * array, <a class="code" href="host_8h.html#66417c5847876295ea87b38140073879" title="Signed version of vl_size and vl_uindex.">vl_index</a> M, <a class="code" href="host_8h.html#66417c5847876295ea87b38140073879" title="Signed version of vl_size and vl_uindex.">vl_index</a> N)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226   mwSize numDimensions = mxGetNumberOfDimensions (array) ;
<a name="l00227"></a>00227   mwSize <span class="keyword">const</span> * dimensions = mxGetDimensions (array) ;
<a name="l00228"></a>00228   <a class="code" href="host_8h.html#c13bd3cc913e1da576e189a3ec8d66fc" title="Same as vl_size.">vl_uindex</a> di ;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="comment">/* check that it is not sparse */</span>
<a name="l00231"></a>00231   <span class="keywordflow">if</span> (mxIsSparse (array)) {
<a name="l00232"></a>00232     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#bce143a5a9b51d987a74f2ad30046520" title="false (0) constant">VL_FALSE</a> ;
<a name="l00233"></a>00233   }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235   <span class="comment">/* check that the number of elements is the prescribed one */</span>
<a name="l00236"></a>00236   <span class="keywordflow">if</span> ((M &gt;= 0) &amp;&amp; (mxGetM (array) != M)) {
<a name="l00237"></a>00237     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#bce143a5a9b51d987a74f2ad30046520" title="false (0) constant">VL_FALSE</a>;
<a name="l00238"></a>00238   }
<a name="l00239"></a>00239   <span class="keywordflow">if</span> ((N &gt;= 0) &amp;&amp; (mxGetN (array) != N)) {
<a name="l00240"></a>00240     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#bce143a5a9b51d987a74f2ad30046520" title="false (0) constant">VL_FALSE</a>;
<a name="l00241"></a>00241   }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243   <span class="comment">/* ok if empty and either M = 0 or N = 0 */</span>
<a name="l00244"></a>00244   <span class="keywordflow">if</span> ((mxGetNumberOfElements (array) == 0) &amp;&amp; (mxGetM (array) == 0 || mxGetN (array) == 0)) {
<a name="l00245"></a>00245     <span class="keywordflow">return</span> <a class="code" href="host_8h.html#0c72a8c7d2abcd2871b3348138c5f1f4" title="true (1) constant">VL_TRUE</a> ;
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <span class="comment">/* ok if any dimension beyond the first two is singleton */</span>
<a name="l00249"></a>00249   <span class="keywordflow">for</span> (di = 2 ; (dimensions[di] == 1) &amp;&amp; di &lt; numDimensions ; ++ di) ;
<a name="l00250"></a>00250   <span class="keywordflow">return</span> di == numDimensions ;
<a name="l00251"></a>00251 }
<a name="l00265"></a>00265 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00266"></a><a class="code" href="mexutils_8h.html#0ab7a171db46b5a5a83dcf7b129f73bc">00266</a> <a class="code" href="mexutils_8h.html#0ab7a171db46b5a5a83dcf7b129f73bc" title="Check if a MATLAB array is plain scalar.">vlmxIsPlainScalar</a> (mxArray <span class="keyword">const</span> * array)
<a name="l00267"></a>00267 {
<a name="l00268"></a>00268   <span class="keywordflow">return</span>
<a name="l00269"></a>00269   <a class="code" href="mexutils_8h.html#98f97abf05708722338eee548633c646" title="Check if a MATLAB array is real.">vlmxIsReal</a> (array) &amp;&amp;
<a name="l00270"></a>00270   <a class="code" href="mexutils_8h.html#c629ff4443857a9b62f4fcf97685d251" title="Check if a MATLAB array is of a prescribed class.">vlmxIsOfClass</a>(array, mxDOUBLE_CLASS)  &amp;&amp;
<a name="l00271"></a>00271   <a class="code" href="mexutils_8h.html#467ab633cf79af40612fd396f9210717" title="Check if a MATLAB array is scalar.">vlmxIsScalar</a> (array) ;
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00282"></a>00282 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00283"></a>00283 <a class="code" href="mexutils_8h.html#a75c1dfb92fd5ee50e9c908be1597e9e" title="Check if a MATLAB array is a plain vector.">vlmxIsPlainVector</a>
<a name="l00284"></a><a class="code" href="mexutils_8h.html#a75c1dfb92fd5ee50e9c908be1597e9e">00284</a> (mxArray <span class="keyword">const</span> * array, <a class="code" href="host_8h.html#66417c5847876295ea87b38140073879" title="Signed version of vl_size and vl_uindex.">vl_index</a> numElements)
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286   <span class="keywordflow">return</span>
<a name="l00287"></a>00287   <a class="code" href="mexutils_8h.html#98f97abf05708722338eee548633c646" title="Check if a MATLAB array is real.">vlmxIsReal</a> (array) &amp;&amp;
<a name="l00288"></a>00288   <a class="code" href="mexutils_8h.html#c629ff4443857a9b62f4fcf97685d251" title="Check if a MATLAB array is of a prescribed class.">vlmxIsOfClass</a> (array, mxDOUBLE_CLASS) &amp;&amp;
<a name="l00289"></a>00289   <a class="code" href="mexutils_8h.html#f4e8c8fbc80faf0c72ba3302607267ed" title="Check if a MATLAB array is a vector.">vlmxIsVector</a> (array, numElements) ;
<a name="l00290"></a>00290 }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 
<a name="l00302"></a>00302 VL_INLINE <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00303"></a><a class="code" href="mexutils_8h.html#fd490ce13cd220d411590f0218637de3">00303</a> <a class="code" href="mexutils_8h.html#fd490ce13cd220d411590f0218637de3" title="Check if a MATLAB array is a plain matrix.">vlmxIsPlainMatrix</a> (mxArray <span class="keyword">const</span> * array, <a class="code" href="host_8h.html#66417c5847876295ea87b38140073879" title="Signed version of vl_size and vl_uindex.">vl_index</a> M, <a class="code" href="host_8h.html#66417c5847876295ea87b38140073879" title="Signed version of vl_size and vl_uindex.">vl_index</a> N)
<a name="l00304"></a>00304 {
<a name="l00305"></a>00305   <span class="keywordflow">return</span>
<a name="l00306"></a>00306   <a class="code" href="mexutils_8h.html#98f97abf05708722338eee548633c646" title="Check if a MATLAB array is real.">vlmxIsReal</a> (array) &amp;&amp;
<a name="l00307"></a>00307   <a class="code" href="mexutils_8h.html#c629ff4443857a9b62f4fcf97685d251" title="Check if a MATLAB array is of a prescribed class.">vlmxIsOfClass</a> (array, mxDOUBLE_CLASS) &amp;&amp;
<a name="l00308"></a>00308   <a class="code" href="mexutils_8h.html#22990c0542dceaa97728420e7022853a" title="Check if a MATLAB array is a matrix.">vlmxIsMatrix</a> (array, M, N) ;
<a name="l00309"></a>00309 }
<a name="l00310"></a>00310 
<a name="l00320"></a><a class="code" href="mexutils_8h.html#76600f902337bf06037c62b27d76255c">00320</a> <span class="preprocessor">#define VL_USE_MATLAB_ENV                                       \</span>
<a name="l00321"></a>00321 <span class="preprocessor">  vl_set_alloc_func (mxMalloc, mxRealloc, mxCalloc, mxFree) ;   \</span>
<a name="l00322"></a>00322 <span class="preprocessor">  vl_set_printf_func (mexPrintf) ;</span>
<a name="l00323"></a>00323 <span class="preprocessor"></span>
<a name="l00339"></a>00339 <span class="keyword">static</span> mxArray *
<a name="l00340"></a><a class="code" href="mexutils_8h.html#cb6b7babe2d72a70fd87f45c25b92b03">00340</a> <a class="code" href="mexutils_8h.html#cb6b7babe2d72a70fd87f45c25b92b03" title="Create array with pre-allocated data.">uCreateNumericArray</a> (mwSize ndim, <span class="keyword">const</span> mwSize * dims,
<a name="l00341"></a>00341                      mxClassID classid, <span class="keywordtype">void</span> * data)
<a name="l00342"></a>00342 {
<a name="l00343"></a>00343   mxArray *A ;
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   <span class="keywordflow">if</span>  (data) {
<a name="l00346"></a>00346     mwSize dims_ [2] = {0, 0} ;
<a name="l00347"></a>00347     A = mxCreateNumericArray (2, dims_, classid, mxREAL) ;
<a name="l00348"></a>00348     mxSetData (A, data) ;
<a name="l00349"></a>00349     mxSetDimensions (A, dims, ndim) ;
<a name="l00350"></a>00350   } <span class="keywordflow">else</span> {
<a name="l00351"></a>00351     A = mxCreateNumericArray (ndim, dims, classid, mxREAL) ;
<a name="l00352"></a>00352   }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="keywordflow">return</span> A ;
<a name="l00355"></a>00355 }
<a name="l00356"></a>00356 
<a name="l00372"></a>00372 <span class="keyword">static</span> mxArray *
<a name="l00373"></a><a class="code" href="mexutils_8h.html#5ce253e48f58f2b79172695537c62402">00373</a> <a class="code" href="mexutils_8h.html#5ce253e48f58f2b79172695537c62402" title="Create an array with pre-allocated data.">uCreateNumericMatrix</a> (<span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N, mxClassID classid, <span class="keywordtype">void</span> * data)
<a name="l00374"></a>00374 {
<a name="l00375"></a>00375   mxArray *A ;
<a name="l00376"></a>00376 
<a name="l00377"></a>00377   <span class="keywordflow">if</span>  (data) {
<a name="l00378"></a>00378     A = mxCreateNumericMatrix (0, 0, classid, mxREAL) ;
<a name="l00379"></a>00379     mxSetData (A, data) ;
<a name="l00380"></a>00380     mxSetM(A, M) ;
<a name="l00381"></a>00381     mxSetN(A, N) ;
<a name="l00382"></a>00382   } <span class="keywordflow">else</span> {
<a name="l00383"></a>00383     A = mxCreateNumericMatrix (M, N, classid, mxREAL) ;
<a name="l00384"></a>00384   }
<a name="l00385"></a>00385 
<a name="l00386"></a>00386   <span class="keywordflow">return</span> A ;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00397"></a>00397 <span class="keyword">static</span> mxArray *
<a name="l00398"></a><a class="code" href="mexutils_8h.html#237a04e511208177f7c00e11e5184b31">00398</a> <a class="code" href="mexutils_8h.html#237a04e511208177f7c00e11e5184b31" title="Create a plain scalar.">uCreateScalar</a> (<span class="keywordtype">double</span> x)
<a name="l00399"></a>00399 {
<a name="l00400"></a>00400   mxArray *A = mxCreateDoubleMatrix(1,1,mxREAL) ;
<a name="l00401"></a>00401   *mxGetPr(A) = x ;
<a name="l00402"></a>00402   <span class="keywordflow">return</span> A ;
<a name="l00403"></a>00403 }
<a name="l00404"></a>00404 
<a name="l00418"></a>00418 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00419"></a><a class="code" href="mexutils_8h.html#1c8c9615dfb27e6b8de0d79a6fdfa1f7">00419</a> <a class="code" href="mexutils_8h.html#1c8c9615dfb27e6b8de0d79a6fdfa1f7" title="Is the array a numeric scalar?">uIsScalar</a>(<span class="keyword">const</span> mxArray* A)
<a name="l00420"></a>00420 {
<a name="l00421"></a>00421   <span class="keywordflow">return</span>
<a name="l00422"></a>00422     mxIsNumeric (A) &amp;&amp; mxGetNumberOfElements(A) == 1 ;
<a name="l00423"></a>00423 }
<a name="l00424"></a>00424 
<a name="l00440"></a>00440 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00441"></a><a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59">00441</a> <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a> (<span class="keyword">const</span> mxArray* A)
<a name="l00442"></a>00442 {
<a name="l00443"></a>00443   <span class="keywordflow">return</span>
<a name="l00444"></a>00444     mxGetClassID(A) == mxDOUBLE_CLASS &amp;&amp;
<a name="l00445"></a>00445     ! mxIsComplex(A) &amp;&amp;
<a name="l00446"></a>00446     ! mxIsSparse(A) ;
<a name="l00447"></a>00447 }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00450"></a>00450 uIsPlainMatrix (<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
<a name="l00451"></a>00451 {
<a name="l00452"></a>00452   <span class="keywordflow">return</span>
<a name="l00453"></a>00453     <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a>(A) &amp;&amp;
<a name="l00454"></a>00454     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00455"></a>00455     (M &lt; 0 || mxGetM(A) == M) &amp;&amp;
<a name="l00456"></a>00456     (N &lt; 0 || mxGetN(A) == N) ;
<a name="l00457"></a>00457 }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00460"></a>00460 uIsPlainVector (<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M)
<a name="l00461"></a>00461 {
<a name="l00462"></a>00462   <span class="keywordflow">return</span>
<a name="l00463"></a>00463     <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a>(A) &amp;&amp;
<a name="l00464"></a>00464     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00465"></a>00465     (mxGetM(A) == 1 || mxGetN(A) == 1) &amp;&amp;
<a name="l00466"></a>00466     (M &lt; 0 || (mxGetM(A) == M || mxGetN(A) == M)) ;
<a name="l00467"></a>00467 }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469 <span class="keyword">static</span> <a class="code" href="host_8h.html#d32e7f8ec7333ff33998cf671a3b1412" title="Boolean.">vl_bool</a>
<a name="l00470"></a>00470 uIsPlainScalar (<span class="keyword">const</span> mxArray* A)
<a name="l00471"></a>00471 {
<a name="l00472"></a>00472   <span class="keywordflow">return</span>
<a name="l00473"></a>00473     <a class="code" href="mexutils_8h.html#a7d0db8905768dae70a5cfb3e3fcdb59" title="Is the array plain matrix?">uIsPlainArray</a>(A) &amp;&amp;
<a name="l00474"></a>00474     mxGetNumberOfElements(A) == 1 ;
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 
<a name="l00495"></a>00495 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00496"></a><a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b">00496</a> <a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b" title="Is the array a numeric matrix?">uIsMatrix</a> (<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
<a name="l00497"></a>00497 {
<a name="l00498"></a>00498   <span class="keywordflow">return</span>
<a name="l00499"></a>00499     mxIsNumeric(A) &amp;&amp;
<a name="l00500"></a>00500     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00501"></a>00501     (M &lt; 0 || mxGetM(A) == M) &amp;&amp;
<a name="l00502"></a>00502     (N &lt; 0 || mxGetN(A) == N) ;
<a name="l00503"></a>00503 }
<a name="l00504"></a>00504 
<a name="l00520"></a>00520 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00521"></a><a class="code" href="mexutils_8h.html#29e5ca434a7aaf49de15457cc40f296e">00521</a> <a class="code" href="mexutils_8h.html#29e5ca434a7aaf49de15457cc40f296e" title="Is the array a vector?">uIsVector</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> N)
<a name="l00522"></a>00522 {
<a name="l00523"></a>00523   <span class="keywordflow">return</span>
<a name="l00524"></a>00524     <a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b" title="Is the array a numeric matrix?">uIsMatrix</a>(A, 1, N) || <a class="code" href="mexutils_8h.html#1b15752ea101ba3abaaf8860aae8978b" title="Is the array a numeric matrix?">uIsMatrix</a>(A, N, 1) ;
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00540"></a>00540 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00541"></a><a class="code" href="mexutils_8h.html#b962450cc2d0bb82e4824ad061f51f80">00541</a> <a class="code" href="mexutils_8h.html#b962450cc2d0bb82e4824ad061f51f80" title="Is the array real?">uIsReal</a> (<span class="keyword">const</span> mxArray* A)
<a name="l00542"></a>00542 {
<a name="l00543"></a>00543   <span class="keywordflow">return</span>
<a name="l00544"></a>00544     mxIsDouble(A) &amp;&amp;
<a name="l00545"></a>00545     ! mxIsComplex(A) ;
<a name="l00546"></a>00546 }
<a name="l00547"></a>00547 
<a name="l00561"></a>00561 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00562"></a><a class="code" href="mexutils_8h.html#a5e2b872c0cf270b64cf78ca0aa3c1b5">00562</a> <a class="code" href="mexutils_8h.html#a5e2b872c0cf270b64cf78ca0aa3c1b5" title="Is the array real and scalar?">uIsRealScalar</a>(<span class="keyword">const</span> mxArray* A)
<a name="l00563"></a>00563 {
<a name="l00564"></a>00564   <span class="keywordflow">return</span>
<a name="l00565"></a>00565     <a class="code" href="mexutils_8h.html#b962450cc2d0bb82e4824ad061f51f80" title="Is the array real?">uIsReal</a> (A) &amp;&amp; mxGetNumberOfElements(A) == 1 ;
<a name="l00566"></a>00566 }
<a name="l00567"></a>00567 
<a name="l00585"></a>00585 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00586"></a><a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82">00586</a> <a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82" title="Is the array a real matrix?">uIsRealMatrix</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> M, <span class="keywordtype">int</span> N)
<a name="l00587"></a>00587 {
<a name="l00588"></a>00588   <span class="keywordflow">return</span>
<a name="l00589"></a>00589     mxIsDouble(A) &amp;&amp;
<a name="l00590"></a>00590     !mxIsComplex(A) &amp;&amp;
<a name="l00591"></a>00591     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00592"></a>00592     (M &lt; 0 || mxGetM(A) == M) &amp;&amp;
<a name="l00593"></a>00593     (N &lt; 0 || mxGetN(A) == N) ;
<a name="l00594"></a>00594 }
<a name="l00595"></a>00595 
<a name="l00611"></a>00611 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00612"></a><a class="code" href="mexutils_8h.html#252efe5f96c0f1d3c4d29716039851a1">00612</a> <a class="code" href="mexutils_8h.html#252efe5f96c0f1d3c4d29716039851a1" title="Is the array a real vector?">uIsRealVector</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> N)
<a name="l00613"></a>00613 {
<a name="l00614"></a>00614   <span class="keywordflow">return</span>
<a name="l00615"></a>00615     <a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82" title="Is the array a real matrix?">uIsRealMatrix</a>(A, 1, N) || <a class="code" href="mexutils_8h.html#c161d6212ab83e1fa97be90de8f9cb82" title="Is the array a real matrix?">uIsRealMatrix</a>(A, N, 1) ;
<a name="l00616"></a>00616 }
<a name="l00617"></a>00617 
<a name="l00635"></a>00635 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00636"></a><a class="code" href="mexutils_8h.html#86aeba58a0b843f89c1a0e987069b0f5">00636</a> <a class="code" href="mexutils_8h.html#86aeba58a0b843f89c1a0e987069b0f5" title="Is the array real with specified dimensions?">uIsRealArray</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> D, <span class="keywordtype">int</span>* dims)
<a name="l00637"></a>00637 {
<a name="l00638"></a>00638   <span class="keywordflow">if</span>(!mxIsDouble(A) || mxIsComplex(A))
<a name="l00639"></a>00639     <span class="keywordflow">return</span> 0 ;
<a name="l00640"></a>00640 
<a name="l00641"></a>00641   <span class="keywordflow">if</span>(D &gt;= 0) {
<a name="l00642"></a>00642     <span class="keywordtype">int</span> d ;
<a name="l00643"></a>00643     mwSize <span class="keyword">const</span> * actual_dims = mxGetDimensions(A) ;
<a name="l00644"></a>00644 
<a name="l00645"></a>00645     <span class="keywordflow">if</span>(mxGetNumberOfDimensions(A) != D)
<a name="l00646"></a>00646       <span class="keywordflow">return</span> 0 ;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <span class="keywordflow">return</span> 1 ;
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <span class="keywordflow">if</span>(dims != NULL) {
<a name="l00651"></a>00651       <span class="keywordflow">for</span>(d = 0 ; d &lt; D ; ++d) {
<a name="l00652"></a>00652         <span class="keywordflow">if</span>(dims[d] &gt;= 0 &amp;&amp; dims[d] != actual_dims[d])
<a name="l00653"></a>00653           <span class="keywordflow">return</span> 0 ;
<a name="l00654"></a>00654       }
<a name="l00655"></a>00655     }
<a name="l00656"></a>00656   }
<a name="l00657"></a>00657   <span class="keywordflow">return</span> 1 ;
<a name="l00658"></a>00658 }
<a name="l00659"></a>00659 
<a name="l00676"></a>00676 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00677"></a><a class="code" href="mexutils_8h.html#8b13f96d5a5470804c4d94b60e07c549">00677</a> <a class="code" href="mexutils_8h.html#8b13f96d5a5470804c4d94b60e07c549" title="Is the array a string?">uIsString</a>(<span class="keyword">const</span> mxArray* A, <span class="keywordtype">int</span> L)
<a name="l00678"></a>00678 {
<a name="l00679"></a>00679   <span class="keywordtype">int</span> M = mxGetM(A) ;
<a name="l00680"></a>00680   <span class="keywordtype">int</span> N = mxGetN(A) ;
<a name="l00681"></a>00681 
<a name="l00682"></a>00682   <span class="keywordflow">return</span>
<a name="l00683"></a>00683     mxIsChar(A) &amp;&amp;
<a name="l00684"></a>00684     mxGetNumberOfDimensions(A) == 2 &amp;&amp;
<a name="l00685"></a>00685     (M == 1 || (M == 0 &amp;&amp; N == 0)) &amp;&amp;
<a name="l00686"></a>00686     (L &lt; 0 || N == L) ;
<a name="l00687"></a>00687 }
<a name="l00688"></a>00688 
<a name="l00699"></a>00699 <span class="keywordtype">void</span>
<a name="l00700"></a><a class="code" href="mexutils_8h.html#9094a2722cadf5c94a1496c504aa1f2a">00700</a> <a class="code" href="mexutils_8h.html#9094a2722cadf5c94a1496c504aa1f2a" title="Generate MEX error with VLFeat format.">mxuError</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> * errorId, <span class="keywordtype">char</span> <span class="keyword">const</span> * errorMessage, ...)
<a name="l00701"></a>00701 {
<a name="l00702"></a>00702   <span class="keywordtype">char</span> formattedErrorId [512] ;
<a name="l00703"></a>00703   <span class="keywordtype">char</span> formattedErrorMessage [1024] ;
<a name="l00704"></a>00704   va_list args;
<a name="l00705"></a>00705   va_start(args, errorMessage) ;
<a name="l00706"></a>00706 
<a name="l00707"></a>00707   <span class="keywordflow">if</span> (! errorId) {
<a name="l00708"></a>00708     errorId = <span class="stringliteral">"undefinedError"</span> ;
<a name="l00709"></a>00709   }
<a name="l00710"></a>00710 
<a name="l00711"></a>00711   <span class="keywordflow">if</span> (! errorMessage) {
<a name="l00712"></a>00712     errorMessage = <span class="stringliteral">"Undefined error description"</span> ;
<a name="l00713"></a>00713   }
<a name="l00714"></a>00714 
<a name="l00715"></a>00715 <span class="preprocessor">#ifdef VL_COMPILER_LCC</span>
<a name="l00716"></a>00716 <span class="preprocessor"></span>  sprintf(formattedErrorId,
<a name="l00717"></a>00717           <span class="stringliteral">"VLFeat:%s"</span>, errorId) ;
<a name="l00718"></a>00718   vsprintf(formattedErrorMessage,
<a name="l00719"></a>00719            errorMessage, args) ;
<a name="l00720"></a>00720 <span class="preprocessor">#else</span>
<a name="l00721"></a>00721 <span class="preprocessor"></span>  snprintf(formattedErrorId,
<a name="l00722"></a>00722            <span class="keyword">sizeof</span>(formattedErrorId)/<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),
<a name="l00723"></a>00723            <span class="stringliteral">"VLFeat:%s"</span>, errorId) ;
<a name="l00724"></a>00724   vsnprintf(formattedErrorMessage,
<a name="l00725"></a>00725             <span class="keyword">sizeof</span>(formattedErrorMessage)/<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>),
<a name="l00726"></a>00726             errorMessage, args) ;
<a name="l00727"></a>00727 <span class="preprocessor">#endif</span>
<a name="l00728"></a>00728 <span class="preprocessor"></span>  va_end(args) ;
<a name="l00729"></a>00729   mexErrMsgIdAndTxt(formattedErrorId, formattedErrorMessage) ;
<a name="l00730"></a>00730 }
<a name="l00731"></a>00731 
<a name="l00733"></a><a class="code" href="mexutils_8h.html#b7e283531a67ed9470973d8994a9e02c">00733</a> <span class="preprocessor">#define VLMX_EIA(...) mxuError("invalidArgument", __VA_ARGS__)</span>
<a name="l00734"></a>00734 <span class="preprocessor"></span>
<a name="l00742"></a>00742 <span class="keywordtype">void</span>
<a name="l00743"></a><a class="code" href="mexutils_8h.html#6d797424f307e26d48f08b9534fb442d">00743</a> <a class="code" href="mexutils_8h.html#6d797424f307e26d48f08b9534fb442d" title="Formatted mexErrMsgTxt().">uErrMsgTxt</a>(<span class="keywordtype">char</span> <span class="keyword">const</span> * format, ...)
<a name="l00744"></a>00744 {
<a name="l00745"></a>00745   <span class="keyword">enum</span> { buffLen = 1024 } ;
<a name="l00746"></a>00746   <span class="keywordtype">char</span> buffer [buffLen] ;
<a name="l00747"></a>00747   va_list args;
<a name="l00748"></a>00748   va_start (args, format) ;
<a name="l00749"></a>00749 <span class="preprocessor">#ifdef VL_COMPILER_LCC</span>
<a name="l00750"></a>00750 <span class="preprocessor"></span>  vsprintf(buffer, format, args) ;
<a name="l00751"></a>00751 <span class="preprocessor">#else</span>
<a name="l00752"></a>00752 <span class="preprocessor"></span>  vsnprintf (buffer, buffLen, format, args) ;
<a name="l00753"></a>00753 <span class="preprocessor">#endif</span>
<a name="l00754"></a>00754 <span class="preprocessor"></span>  va_end (args) ;
<a name="l00755"></a>00755   mexErrMsgTxt (buffer) ;
<a name="l00756"></a>00756 }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758 
<a name="l00763"></a><a class="code" href="struct__uMexOption.html">00763</a> <span class="keyword">struct </span><a class="code" href="struct__uMexOption.html" title="MEX option.">_uMexOption</a>
<a name="l00764"></a>00764 {
<a name="l00765"></a><a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">00765</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">name</a> ; 
<a name="l00766"></a><a class="code" href="struct__uMexOption.html#3a190a6116e752092cf079af89cee74c">00766</a>   <span class="keywordtype">int</span> <a class="code" href="struct__uMexOption.html#3a190a6116e752092cf079af89cee74c">has_arg</a> ;      
<a name="l00767"></a><a class="code" href="struct__uMexOption.html#d412b9b44bc226fe56503cd6e79eb59f">00767</a>   <span class="keywordtype">int</span> <a class="code" href="struct__uMexOption.html#d412b9b44bc226fe56503cd6e79eb59f">val</a> ;          
<a name="l00768"></a>00768 } ;
<a name="l00769"></a>00769 
<a name="l00773"></a><a class="code" href="mexutils_8h.html#8a343d594738b6672b4f5ad73d07eb8f">00773</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct__uMexOption.html" title="MEX option.">_uMexOption</a> <a class="code" href="struct__uMexOption.html" title="MEX option.">uMexOption</a> ;
<a name="l00774"></a>00774 
<a name="l00785"></a>00785 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00786"></a><a class="code" href="mexutils_8h.html#eb8facc0f350d442ab1b183677f6acca">00786</a> <a class="code" href="mexutils_8h.html#eb8facc0f350d442ab1b183677f6acca" title="Case insensitive string comparison.">uStrICmp</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s1, <span class="keyword">const</span> <span class="keywordtype">char</span> *s2)
<a name="l00787"></a>00787 {
<a name="l00788"></a>00788   <span class="keywordflow">while</span> (tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s1) ==
<a name="l00789"></a>00789          tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s2))
<a name="l00790"></a>00790   {
<a name="l00791"></a>00791     <span class="keywordflow">if</span> (*s1 == 0)
<a name="l00792"></a>00792       <span class="keywordflow">return</span> 0;
<a name="l00793"></a>00793     s1++;
<a name="l00794"></a>00794     s2++;
<a name="l00795"></a>00795   }
<a name="l00796"></a>00796   <span class="keywordflow">return</span>
<a name="l00797"></a>00797     (<span class="keywordtype">int</span>)tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s1) -
<a name="l00798"></a>00798     (int)tolower((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)*s2) ;
<a name="l00799"></a>00799 }
<a name="l00800"></a>00800 
<a name="l00825"></a><a class="code" href="mexutils_8h.html#5f859da54b85634990a9560d7b7fe3e0">00825</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mexutils_8h.html#5f859da54b85634990a9560d7b7fe3e0" title="Process next option.">uNextOption</a>(mxArray <span class="keyword">const</span> *args[], <span class="keywordtype">int</span> nargs,
<a name="l00826"></a>00826                        <a class="code" href="struct__uMexOption.html" title="MEX option.">uMexOption</a> <span class="keyword">const</span> *options,
<a name="l00827"></a>00827                        <span class="keywordtype">int</span> *next,
<a name="l00828"></a>00828                        mxArray <span class="keyword">const</span> **<a class="code" href="getopt__long_8c.html#850d62c8bf5d6f6d9b92cd86a00d6739" title="current option">optarg</a>)
<a name="l00829"></a>00829 {
<a name="l00830"></a>00830   <span class="keywordtype">char</span> err_msg [1024] ;
<a name="l00831"></a>00831   <span class="keywordtype">char</span> <a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">name</a>    [1024] ;
<a name="l00832"></a>00832   <span class="keywordtype">int</span> opt = -1, i, len ;
<a name="l00833"></a>00833 
<a name="l00834"></a>00834   <span class="keywordflow">if</span> (*next &gt;= nargs) {
<a name="l00835"></a>00835     <span class="keywordflow">return</span> opt ;
<a name="l00836"></a>00836   }
<a name="l00837"></a>00837 
<a name="l00838"></a>00838   <span class="comment">/* check the array is a string */</span>
<a name="l00839"></a>00839   <span class="keywordflow">if</span> (! <a class="code" href="mexutils_8h.html#8b13f96d5a5470804c4d94b60e07c549" title="Is the array a string?">uIsString</a> (args [*next], -1)) {
<a name="l00840"></a>00840     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00841"></a>00841              <span class="stringliteral">"The option name is not a string (argument number %d)."</span>,
<a name="l00842"></a>00842              *next + 1) ;
<a name="l00843"></a>00843     mexErrMsgTxt(err_msg) ;
<a name="l00844"></a>00844   }
<a name="l00845"></a>00845 
<a name="l00846"></a>00846   <span class="comment">/* retrieve option name */</span>
<a name="l00847"></a>00847   len = mxGetNumberOfElements (args [*next]) ;
<a name="l00848"></a>00848 
<a name="l00849"></a>00849   <span class="keywordflow">if</span> (mxGetString (args [*next], name, <span class="keyword">sizeof</span>(name))) {
<a name="l00850"></a>00850     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00851"></a>00851              <span class="stringliteral">"The option name is too long (argument number %d)."</span>,
<a name="l00852"></a>00852              *next + 1) ;
<a name="l00853"></a>00853     mexErrMsgTxt(err_msg) ;
<a name="l00854"></a>00854   }
<a name="l00855"></a>00855 
<a name="l00856"></a>00856   <span class="comment">/* advance argument list */</span>
<a name="l00857"></a>00857   ++ (*next) ;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859   <span class="comment">/* now lookup the string in the option table */</span>
<a name="l00860"></a>00860   <span class="keywordflow">for</span> (i = 0 ; options[i].<a class="code" href="struct__uMexOption.html#a69e5a75c96291293fb0ee0c48699e08">name</a> != 0 ; ++i) {
<a name="l00861"></a>00861     <span class="keywordflow">if</span> (<a class="code" href="mexutils_8h.html#eb8facc0f350d442ab1b183677f6acca" title="Case insensitive string comparison.">uStrICmp</a>(name, options[i].name) == 0) {
<a name="l00862"></a>00862       opt = options[i].<a class="code" href="struct__uMexOption.html#d412b9b44bc226fe56503cd6e79eb59f">val</a> ;
<a name="l00863"></a>00863       break ;
<a name="l00864"></a>00864     }
<a name="l00865"></a>00865   }
<a name="l00866"></a>00866 
<a name="l00867"></a>00867   <span class="comment">/* unknown argument */</span>
<a name="l00868"></a>00868   <span class="keywordflow">if</span> (opt &lt; 0) {
<a name="l00869"></a>00869     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00870"></a>00870              <span class="stringliteral">"Unknown option '%s'."</span>, name) ;
<a name="l00871"></a>00871     mexErrMsgTxt(err_msg) ;
<a name="l00872"></a>00872   }
<a name="l00873"></a>00873 
<a name="l00874"></a>00874   <span class="comment">/* no argument */</span>
<a name="l00875"></a>00875   <span class="keywordflow">if</span> (! options [i].<a class="code" href="struct__uMexOption.html#3a190a6116e752092cf079af89cee74c">has_arg</a>) {
<a name="l00876"></a>00876     <span class="keywordflow">if</span> (optarg) *optarg = 0 ;
<a name="l00877"></a>00877     <span class="keywordflow">return</span> opt ;
<a name="l00878"></a>00878   }
<a name="l00879"></a>00879 
<a name="l00880"></a>00880   <span class="comment">/* argument */</span>
<a name="l00881"></a>00881   <span class="keywordflow">if</span> (*next &gt;= nargs) {
<a name="l00882"></a>00882     snprintf(err_msg, <span class="keyword">sizeof</span>(err_msg),
<a name="l00883"></a>00883              <span class="stringliteral">"Option '%s' requires an argument."</span>, options[i].name) ;
<a name="l00884"></a>00884     mexErrMsgTxt(err_msg) ;
<a name="l00885"></a>00885   }
<a name="l00886"></a>00886 
<a name="l00887"></a>00887   <span class="keywordflow">if</span> (optarg) *optarg = args [*next] ;
<a name="l00888"></a>00888   ++ (*next) ;
<a name="l00889"></a>00889   <span class="keywordflow">return</span> opt ;
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
<a name="l00892"></a>00892 <span class="comment">/* MEXUTILS_H */</span>
<a name="l00893"></a>00893 <span class="preprocessor">#endif</span>
</pre></div></div>
     <!-- Doc Here -->
    </div>
   
   </div>
   <div class="clear">&nbsp;</div>
  </div> <!-- pagebody -->
  <div id="footer">
   &copy; 2005-09 Andrea Vedaldi and Brian Fulkerson
  </div> <!-- footer -->
  
  <!-- Google Analytics Begins -->
  <script xml:space="preserve" type="text/javascript">
   //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
   }
   //]]>
  </script>
  <script xml:space="preserve" type="text/javascript">
    //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {

   try {
   var pageTracker = _gat._getTracker("UA-4936091-2");
   pageTracker._trackPageview();
   } catch(err) {}

   }
   //]]>
  </script>
  <!-- Google Analytics Ends -->
 </body>
</html>

 
