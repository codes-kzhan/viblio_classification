<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">   
 <meta>
  <!-- Stylesheets -->
  <link href="../web.css" type="text/css" rel="stylesheet"></link>
  <title>VLFeat - Documentation - C API</title>
   
  
  <!-- Scripts-->
  
 </meta>
 
 <!-- Body Start -->
 <body>
  <div id="header">
   <!-- Google CSE Search Box Begins -->
   <form action="http://www.vlfeat.org/search.html" method="get" id="cse-search-box" enctype="application/x-www-form-urlencoded">
    <div>
     <input type="hidden" name="cx" value="003215582122030917471:oq23albfeam"></input>
     <input type="hidden" name="cof" value="FORID:11"></input>
     <input type="hidden" name="ie" value="UTF-8"></input>
     <input type="text" name="q" size="31"></input>
     <input type="submit" name="sa" value="Search"></input>
    </div>
   </form>
   <script src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en" xml:space="preserve" type="text/javascript"></script>
   <!-- Google CSE Search Box Ends -->
   <h1>VLFeat.org</h1>
  </div>
  <div id="headbanner">
   Documentation - C API
  </div>
  <div id="pagebody">
   <div id="sidebar"> <!-- Navigation Start -->
    <ul>
<li><a href="../index.html">Home</a>
</li>
<li><a href="../download.html">Download</a>
</li>
<li><a href="../doc.html">Documentation</a>
<ul>
<li><a href="../mdoc/mdoc.html">Matlab API</a>
</li>
<li><a href="index.html" class='active' >C API</a>
</li>
<li><a href="../man/man.html">Man pages</a>
</li>
</ul></li>
<li><a href="../overview/tut.html">Tutorials</a>
</li>
</ul>

   </div> <!-- sidebar -->
   <div id="content">
    
    <div class="doxygen">
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>kdtree.h File Reference</h1>KD-tree.  
<a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="generic_8h-source.html">generic.h</a>&quot;</code><br>

<p>
<a href="kdtree_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__VlKDForestNeighbor.html">_VlKDForestNeighbor</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Neighbor of a query point.  <a href="struct__VlKDForestNeighbor.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__VlKDForest.html">_VlKDForest</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KDForest object.  <a href="struct__VlKDForest.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9af55b2fcdfed500314205a3449b37d4"></a><!-- doxytag: member="kdtree.h::VlKDTreeThresholdingMethod" ref="9af55b2fcdfed500314205a3449b37d4" args="" -->
typedef enum <br class="typebreak">
<a class="el" href="kdtree_8h.html#f178ae6c1876c146ba00155d5c16c531">_VlKDTreeThresholdingMethod</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#9af55b2fcdfed500314205a3449b37d4">VlKDTreeThresholdingMethod</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thresholding method. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7f6df51074aefc44e6e0295beaea03b4"></a><!-- doxytag: member="kdtree.h::VlKDForestNeighbor" ref="7f6df51074aefc44e6e0295beaea03b4" args="" -->
typedef struct <a class="el" href="struct__VlKDForestNeighbor.html">_VlKDForestNeighbor</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#7f6df51074aefc44e6e0295beaea03b4">VlKDForestNeighbor</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Neighbor of a query point. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f2305db9740ef5501b5e6a19a374a726"></a><!-- doxytag: member="kdtree.h::VlKDForest" ref="f2305db9740ef5501b5e6a19a374a726" args="" -->
typedef struct <a class="el" href="struct__VlKDForest.html">_VlKDForest</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#f2305db9740ef5501b5e6a19a374a726">VlKDForest</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KDForest object. <br></td></tr>
<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#f178ae6c1876c146ba00155d5c16c531">_VlKDTreeThresholdingMethod</a> </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thresholding method. <br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Creatind and disposing</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT <a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#0a94ee1ef061e4c51305bc0a3cf948af">vl_kdforest_new</a> (int unsigned numDimensions, int unsigned numTrees)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create new KDForest object.  <a href="#0a94ee1ef061e4c51305bc0a3cf948af"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#f2e093f010ccc6db5e8d19f6a7b31684">vl_kdforest_delete</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> *self)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delete KDForest object.  <a href="#f2e093f010ccc6db5e8d19f6a7b31684"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Building and querying</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#eaa0ff64d65550d41615464efd4098d8">vl_kdforest_build</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> *self, int numData, float const *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Build KDTree from data.  <a href="#eaa0ff64d65550d41615464efd4098d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_EXPORT int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#977a93b67b3358bb20c5f5c169350184">vl_kdforest_query</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> *self, <a class="el" href="struct__VlKDForestNeighbor.html">VlKDForestNeighbor</a> *neighbors, int unsigned numNeighbors, float const *query)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query operation.  <a href="#977a93b67b3358bb20c5f5c169350184"></a><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Retrieving and setting parameters</div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE int unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#8fb970ae49883f62c41dcff394f8a09f">vl_kdforest_get_depth_of_tree</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *self, int unsigned treeIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the detph of a given tree.  <a href="#8fb970ae49883f62c41dcff394f8a09f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE int unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#82505240c5c9e336fb159bb3de5e09eb">vl_kdforest_get_num_nodes_of_tree</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *self, int unsigned treeIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of nodes of a given tree.  <a href="#82505240c5c9e336fb159bb3de5e09eb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE int unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#2a61401c5b65f13c2b93c506baaf2d7d">vl_kdforest_get_num_trees</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *self)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of trees in the forest.  <a href="#2a61401c5b65f13c2b93c506baaf2d7d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#7339e1c40b53ebef1486a8b2b574168a">vl_kdforest_set_max_num_comparisons</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> *self, int unsigned n)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the maximum number of comparisons for a search.  <a href="#7339e1c40b53ebef1486a8b2b574168a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE int unsigned&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#170cfbe5e44c511db20694c567449612">vl_kdforest_get_max_num_comparisons</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> *self)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the maximum number of comparisons for a search.  <a href="#170cfbe5e44c511db20694c567449612"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#170103952f5fa62bd7577363b9273272">vl_kdforest_set_thresholding_method</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> *self, <a class="el" href="kdtree_8h.html#9af55b2fcdfed500314205a3449b37d4">VlKDTreeThresholdingMethod</a> method)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the thresholding method.  <a href="#170103952f5fa62bd7577363b9273272"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">VL_INLINE <br class="typebreak">
<a class="el" href="kdtree_8h.html#9af55b2fcdfed500314205a3449b37d4">VlKDTreeThresholdingMethod</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdtree_8h.html#83eeaa0e8299d79ca7c182fd19d8ba3c">vl_kdforest_get_thresholding_method</a> (<a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *self)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the thresholding method.  <a href="#83eeaa0e8299d79ca7c182fd19d8ba3c"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
VlKDTree implements a KD-tree object data structure useful to index moderately dimensional vector spaces. It can be used to quickly match two groups of feature descriptors.<p>
<ul>
<li><a class="el" href="kdtree_8h.html#kdtree-overview">Overview</a></li><li><a class="el" href="kdtree_8h.html#kdtree-tech">Technical details</a></li></ul>
<h2><a class="anchor" name="kdtree-overview">
Overview</a></h2>
To create a <a class="el" href="kdtree_8h.html#f2305db9740ef5501b5e6a19a374a726" title="KDForest object.">VlKDForest</a> object use <a class="el" href="kdtree_8h.html#0a94ee1ef061e4c51305bc0a3cf948af" title="Create new KDForest object.">vl_kdforest_new</a> specifying the dimensionality of the data and the number of trees in the forest. With one tree only, the algorithm is analogous to [1] (best-bin KDTree). Multiple trees correspond to the randomized KDTree forest as in [2,3].<p>
To let the KD-tree index some data use <a class="el" href="kdtree_8h.html#eaa0ff64d65550d41615464efd4098d8" title="Build KDTree from data.">vl_kdforest_build</a>. Note that for efficiency KD-tree does not copy the data but retains a pointer to it. Therefore the data must exist (and not change) until the KD-tree is deleted. To delete the KD-tree object, use <a class="el" href="kdtree_8h.html#f2e093f010ccc6db5e8d19f6a7b31684" title="Delete KDForest object.">vl_kdforest_delete</a>.<p>
To find the N nearest neighbors to a query point use <a class="el" href="kdtree_8h.html#977a93b67b3358bb20c5f5c169350184" title="Query operation.">vl_kdforest_query</a>. To set a maximum number of comparisons per query and calculate approximate nearest neighbors use <a class="el" href="kdtree_8h.html#7339e1c40b53ebef1486a8b2b574168a" title="Set the maximum number of comparisons for a search.">vl_kdforest_set_max_num_comparisons</a>.<h2><a class="anchor" name="kdtree-tech">
Technical details</a></h2>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="kdtree_8h.html#kdtree-references">References</a></dd></dl>
KDTree implements the best-bin-first kd-tree of [1]. Given a set of points <img class="formulaInl" alt="$ x_1,\dots,x_n \in \mathbb{R}^d $" src="form_83.png">, the algorithm recursively partitions the <em>d</em> dimensional Euclidean space <img class="formulaInl" alt="$ \mathbb{R}^d $" src="form_84.png"> into (hyper-) rectangles.<p>
Partitions are organized into a binary tree with the root corresponding to the whole space <img class="formulaInl" alt="$ \mathbb{R}^d $" src="form_84.png">. The algorithm refines each partition by dividing it into two halves by thresholding along a given dimension. Both the splitting dimension and the threshold are determined as a statistic of the data points contained in the partition. The splitting dimension is the one which has largest sample variance and the splitting threshold is either the sample mean or the median. Leaves are atomic partitions and they contain a list of zero or more data points (typically one).<p>
Querying amounts to finding the N data points closer to a given query point <img class="formulaInl" alt="$ x_q \in \mathbb{R}^d $" src="form_85.png">. This is done by branch-and-bound. A search state is an active partition (initially the root) and it is weighed by the lower bound on the distance of any point in the partition and the query point. Such a lower bound is trivial to compute because partitions are hyper-rectangles.<h2><a class="anchor" name="kdtree-references">
References</a></h2>
[1] J. S. Beis and D. G. Lowe. Shape indexing using approximate nearest-neighbour search in high-dimensional spaces. In Proc. CVPR, 1997.<p>
[2] C. Silpa-Anan and R. Hartley. Optimised KD-trees for fast image descriptor matching. In Proc. CVPR, 2008.<p>
[3] M. Muja and D. G. Lowe. Fast approximate nearest neighbors with automatic algorithmic configuration. In Proc. VISAPP, 2009.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Andrea Vedaldi </dd></dl>

<p>Definition in file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="eaa0ff64d65550d41615464efd4098d8"></a><!-- doxytag: member="kdtree.h::vl_kdforest_build" ref="eaa0ff64d65550d41615464efd4098d8" args="(VlKDForest *self, int numData, float const *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_kdforest_build           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float const *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tree</em>&nbsp;</td><td>KDTree object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numData</em>&nbsp;</td><td>number of data points. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>pointer to the data.</td></tr>
  </table>
</dl>
The function builds the KDTree by processing the data <em>data</em>. For efficiency, KDTree does not copy the data, but retains a pointer to it. Therefore the data must survive (and not change) until the KDTree is deleted. 
<p>Definition at line <a class="el" href="kdtree_8c-source.html#l00342">342</a> of file <a class="el" href="kdtree_8c-source.html">kdtree.c</a>.</p>

<p>References <a class="el" href="kdtree_8c-source.html#l00164">vl_kdtree_build_recursively()</a>, <a class="el" href="kdtree_8c-source.html#l00118">vl_kdtree_node_new()</a>, and <a class="el" href="generic_8h-source.html#l00247">vl_malloc()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f2e093f010ccc6db5e8d19f6a7b31684"></a><!-- doxytag: member="kdtree.h::vl_kdforest_delete" ref="f2e093f010ccc6db5e8d19f6a7b31684" args="(VlKDForest *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT void vl_kdforest_delete           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tree</em>&nbsp;</td><td>KDForest object to delete </td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="kdtree_8h.html#0a94ee1ef061e4c51305bc0a3cf948af" title="Create new KDForest object.">vl_kdforest_new</a> </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8c-source.html#l00313">313</a> of file <a class="el" href="kdtree_8c-source.html">kdtree.c</a>.</p>

<p>References <a class="el" href="generic_8h-source.html#l00265">vl_free()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8fb970ae49883f62c41dcff394f8a09f"></a><!-- doxytag: member="kdtree.h::vl_kdforest_get_depth_of_tree" ref="8fb970ae49883f62c41dcff394f8a09f" args="(VlKDForest const *self, int unsigned treeIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unsigned vl_kdforest_get_depth_of_tree           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int unsigned&nbsp;</td>
          <td class="paramname"> <em>treeIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>treeIndex</em>&nbsp;</td><td>index of the tree. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of trees. </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00158">158</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="170cfbe5e44c511db20694c567449612"></a><!-- doxytag: member="kdtree.h::vl_kdforest_get_max_num_comparisons" ref="170cfbe5e44c511db20694c567449612" args="(VlKDForest *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unsigned vl_kdforest_get_max_num_comparisons           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>maximum number of leaves.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="kdtree_8h.html#7339e1c40b53ebef1486a8b2b574168a" title="Set the maximum number of comparisons for a search.">vl_kdforest_set_max_num_comparisons</a>. </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00205">205</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="82505240c5c9e336fb159bb3de5e09eb"></a><!-- doxytag: member="kdtree.h::vl_kdforest_get_num_nodes_of_tree" ref="82505240c5c9e336fb159bb3de5e09eb" args="(VlKDForest const *self, int unsigned treeIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unsigned vl_kdforest_get_num_nodes_of_tree           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int unsigned&nbsp;</td>
          <td class="paramname"> <em>treeIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>treeIndex</em>&nbsp;</td><td>index of the tree. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of trees. </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00144">144</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="2a61401c5b65f13c2b93c506baaf2d7d"></a><!-- doxytag: member="kdtree.h::vl_kdforest_get_num_trees" ref="2a61401c5b65f13c2b93c506baaf2d7d" args="(VlKDForest const *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unsigned vl_kdforest_get_num_trees           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of trees. </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00172">172</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="83eeaa0e8299d79ca7c182fd19d8ba3c"></a><!-- doxytag: member="kdtree.h::vl_kdforest_get_thresholding_method" ref="83eeaa0e8299d79ca7c182fd19d8ba3c" args="(VlKDForest const *self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_INLINE <a class="el" href="kdtree_8h.html#9af55b2fcdfed500314205a3449b37d4">VlKDTreeThresholdingMethod</a> vl_kdforest_get_thresholding_method           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> const *&nbsp;</td>
          <td class="paramname"> <em>self</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>thresholding method.</dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="kdtree_8h.html#170103952f5fa62bd7577363b9273272" title="Set the thresholding method.">vl_kdforest_set_thresholding_method</a> </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00235">235</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="0a94ee1ef061e4c51305bc0a3cf948af"></a><!-- doxytag: member="kdtree.h::vl_kdforest_new" ref="0a94ee1ef061e4c51305bc0a3cf948af" args="(int unsigned numDimensions, int unsigned numTrees)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT <a class="el" href="struct__VlKDForest.html">VlKDForest</a>* vl_kdforest_new           </td>
          <td>(</td>
          <td class="paramtype">int unsigned&nbsp;</td>
          <td class="paramname"> <em>numDimensions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int unsigned&nbsp;</td>
          <td class="paramname"> <em>numTrees</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>numDimensions</em>&nbsp;</td><td>data dimensionality. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numTrees</em>&nbsp;</td><td>number of trees in the forest. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>new KDForest. </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8c-source.html#l00282">282</a> of file <a class="el" href="kdtree_8c-source.html">kdtree.c</a>.</p>

<p>References <a class="el" href="generic_8h-source.html#l00247">vl_malloc()</a>.</p>

</div>
</div><p>
<a class="anchor" name="977a93b67b3358bb20c5f5c169350184"></a><!-- doxytag: member="kdtree.h::vl_kdforest_query" ref="977a93b67b3358bb20c5f5c169350184" args="(VlKDForest *self, VlKDForestNeighbor *neighbors, int unsigned numNeighbors, float const *query)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_EXPORT int vl_kdforest_query           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__VlKDForestNeighbor.html">VlKDForestNeighbor</a> *&nbsp;</td>
          <td class="paramname"> <em>neighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int unsigned&nbsp;</td>
          <td class="paramname"> <em>numNeighbors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float const *&nbsp;</td>
          <td class="paramname"> <em>query</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDTree object instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>neighbors</em>&nbsp;</td><td>list of nearest neighbors found (output). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numNeighbors</em>&nbsp;</td><td>number of nearest neighbors to find. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query</em>&nbsp;</td><td>query point. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of tree leaves visited.</dd></dl>
A neighbor is represented by an instance of the structure <a class="el" href="kdtree_8h.html#7f6df51074aefc44e6e0295beaea03b4" title="Neighbor of a query point.">VlKDForestNeighbor</a>. Each entry contains the index of the neighbor (this is an index into the KDTree data) and its distance to the query point. Neighbors are sorted by increasing distance. 
<p>Definition at line <a class="el" href="kdtree_8c-source.html#l00563">563</a> of file <a class="el" href="kdtree_8c-source.html">kdtree.c</a>.</p>

<p>References <a class="el" href="kdtree_8h-source.html#l00058">_VlKDForestNeighbor::distance</a>, <a class="el" href="kdtree_8h-source.html#l00059">_VlKDForestNeighbor::index</a>, <a class="el" href="generic_8h-source.html#l00259">vl_calloc()</a>, <a class="el" href="generic_8h-source.html#l00265">vl_free()</a>, <a class="el" href="mathop_8h-source.html#l00081">VL_INFINITY_F</a>, <a class="el" href="kdtree_8c-source.html#l00402">vl_kdforest_query_recursively()</a>, <a class="el" href="kdtree_8c-source.html#l00526">vl_kdtree_calc_bounds_recursively()</a>, <a class="el" href="generic_8h-source.html#l00247">vl_malloc()</a>, and <a class="el" href="mathop_8h-source.html#l00078">VL_NAN_F</a>.</p>

</div>
</div><p>
<a class="anchor" name="7339e1c40b53ebef1486a8b2b574168a"></a><!-- doxytag: member="kdtree.h::vl_kdforest_set_max_num_comparisons" ref="7339e1c40b53ebef1486a8b2b574168a" args="(VlKDForest *self, int unsigned n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vl_kdforest_set_max_num_comparisons           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int unsigned&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n</em>&nbsp;</td><td>maximum number of leaves.</td></tr>
  </table>
</dl>
This function sets the maximum number of comparisons for a nearest neighbor search. Setting it to 0 means unbounded comparisons.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="kdtree_8h.html#977a93b67b3358bb20c5f5c169350184" title="Query operation.">vl_kdforest_query</a>, <a class="el" href="kdtree_8h.html#170cfbe5e44c511db20694c567449612" title="Get the maximum number of comparisons for a search.">vl_kdforest_get_max_num_comparisons</a>. </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00190">190</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="170103952f5fa62bd7577363b9273272"></a><!-- doxytag: member="kdtree.h::vl_kdforest_set_thresholding_method" ref="170103952f5fa62bd7577363b9273272" args="(VlKDForest *self, VlKDTreeThresholdingMethod method)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VL_INLINE void vl_kdforest_set_thresholding_method           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__VlKDForest.html">VlKDForest</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="kdtree_8h.html#9af55b2fcdfed500314205a3449b37d4">VlKDTreeThresholdingMethod</a>&nbsp;</td>
          <td class="paramname"> <em>method</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>self</em>&nbsp;</td><td>KDForest object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>one of <a class="el" href="kdtree_8h.html#9af55b2fcdfed500314205a3449b37d4" title="Thresholding method.">VlKDTreeThresholdingMethod</a>.</td></tr>
  </table>
</dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="kdtree_8h.html#83eeaa0e8299d79ca7c182fd19d8ba3c" title="Get the thresholding method.">vl_kdforest_get_thresholding_method</a> </dd></dl>

<p>Definition at line <a class="el" href="kdtree_8h-source.html#l00219">219</a> of file <a class="el" href="kdtree_8h-source.html">kdtree.h</a>.</p>

</div>
</div><p>
</div>
     <!-- Doc Here -->
    </div>
   
   </div>
   <div class="clear">&nbsp;</div>
  </div> <!-- pagebody -->
  <div id="footer">
   &copy; 2005-09 Andrea Vedaldi and Brian Fulkerson
  </div> <!-- footer -->
  
  <!-- Google Analytics Begins -->
  <script xml:space="preserve" type="text/javascript">
   //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
   }
   //]]>
  </script>
  <script xml:space="preserve" type="text/javascript">
    //<![CDATA[
    var localre = /vlfeat.org/;
    if(document.location.host.search(localre) != -1)
    {

   try {
   var pageTracker = _gat._getTracker("UA-4936091-2");
   pageTracker._trackPageview();
   } catch(err) {}

   }
   //]]>
  </script>
  <!-- Google Analytics Ends -->
 </body>
</html>

 
